<!doctypehtml><meta charset="UTF-8"><title>Clipboard Viewer</title><style>body{font-family:serif;margin:8px}button,label{margin-top:5px;display:inline-block}#clipboard-content{margin-top:10px;border:1px solid #ccc;padding:10px;min-height:200px;background:#f9f9f9}.clipboard-item{margin-bottom:15px;padding:10px;border:1px solid #ddd;background:#fff}.clipboard-item h4{margin:0 0 10px 0;color:#333}.text-content{font-family:monospace;white-space:pre-wrap;word-wrap:break-word;max-height:200px;overflow-y:auto;border:1px solid #eee;padding:5px;background:#fafafa}.download-btn{background:#007bff;color:#fff;border:none;padding:5px 10px;cursor:pointer;border-radius:3px}.download-btn:hover{background:#0056b3}.error{color:red}.success{color:#0a0}.empty{color:#666;font-style:italic}</style></head><body><b>- mia's tools - <a href="..">home</a></b><hr><h3 style="margin-bottom:0">Clipboard Viewer</h3><button onclick="n()">View Clipboard</button><label><input id="auto-refresh" type="checkbox"> Auto-refresh every 2s</label><div id="status" style="margin-top:5px"></div><div id="clipboard-content"></div><script>let t=null;async function n(){const t=document.getElementById("status");const o=document.getElementById("clipboard-content");try{if(!navigator.clipboard){throw new Error("Clipboard API not supported")}t.textContent="Reading clipboard...";t.className="";const c=await navigator.clipboard.read();if(c.length===0){o.innerHTML='<div class="empty">Clipboard is empty</div>';t.textContent="Clipboard is empty";return}o.innerHTML="";let n=0;for(let t=0;t<c.length;t++){const i=c[t];const r=document.createElement("div");r.className="clipboard-item";const a=document.createElement("h4");a.textContent=`Item ${t+1} (${i.types.join(", ")})`;r.appendChild(a);for(const s of i.types){try{const d=await i.getType(s);if(s.startsWith("text/")){const l=await d.text();const u=document.createElement("div");u.innerHTML=`<strong>${s}:</strong><div class="text-content">${$(l)}</div>`;r.appendChild(u)}else if(s.startsWith("image/")){const m=document.createElement("img");m.src=URL.createObjectURL(d);m.style.maxWidth="300px";m.style.maxHeight="200px";m.style.border="1px solid #ccc";const p=document.createElement("div");p.innerHTML=`<strong>${s}:</strong><br>`;p.appendChild(m);const g=document.createElement("button");g.className="download-btn";g.textContent=`Download ${v(s)}`;g.onclick=()=>f(d,`clipboard-image-${t+1}${v(s)}`);p.appendChild(document.createElement("br"));p.appendChild(g);r.appendChild(p)}else{const p=document.createElement("div");p.innerHTML=`<strong>${s}:</strong> (${d.size} bytes)<br>`;const g=document.createElement("button");g.className="download-btn";g.textContent=`Download ${s.split("/").pop()||"file"}`;g.onclick=()=>f(d,`clipboard-data-${t+1}.${s.split("/").pop()||"bin"}`);p.appendChild(g);r.appendChild(p)}n++}catch(e){const b=document.createElement("div");b.innerHTML=`<strong>${s}:</strong> <span class="error">Error reading: ${e.message}</span>`;r.appendChild(b)}}o.appendChild(r)}t.textContent=`Found ${n} clipboard items`;t.className="success"}catch(e){t.textContent="Error: "+e.message;t.className="error";o.innerHTML='<div class="error">Failed to read clipboard. Make sure you grant permission when prompted.</div>'}}function f(t,n){const o=URL.createObjectURL(t);const e=document.createElement("a");e.href=o;e.download=n;document.body.appendChild(e);e.click();document.body.removeChild(e);URL.revokeObjectURL(o)}function v(t){const n={t:".png",o:".jpg",i:".gif",l:".webp",u:".bmp",m:".txt",p:".html",g:".json"};return n[t]||".bin"}function $(t){const n=document.createElement("div");n.textContent=t;return n.innerHTML}document.getElementById("auto-refresh").addEventListener("change",function(){if(this.checked){t=setInterval(n,2e3)}else{if(t){clearInterval(t);t=null}}});window.addEventListener("beforeunload",function(){if(t){clearInterval(t)}});</script>
